(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();const w=.8;function M(){const e=Math.random();return e<.03?20:e<.13?15:1+Math.floor(Math.random()*10)}function g(e){const o=Math.floor(e/60),t=e%60;return`${String(o).padStart(2,"0")}:${String(t).padStart(2,"0")}`}const h=document.getElementById("startFace"),B=document.getElementById("repFace"),O=document.getElementById("repNumber"),C=document.getElementById("currentLabel"),x=document.getElementById("statusText"),S=document.getElementById("timeText"),b=document.getElementById("setsText"),T=document.getElementById("calText"),L=document.getElementById("repsText"),N=document.getElementById("flipBtn"),F=document.getElementById("quitBtn"),s=document.getElementById("modalOverlay"),U=document.getElementById("closeBtn"),$=document.getElementById("playAgainBtn"),k=document.getElementById("downloadBtn"),q=document.getElementById("mTime"),G=document.getElementById("mSets"),D=document.getElementById("mReps"),_=document.getElementById("mCals");let p=!1,c=null,a=0,d=0,m=0,u=0;function z(){c||(c=setInterval(()=>{a+=1,S.textContent=g(a)},1e3))}function v(){c&&clearInterval(c),c=null}function H(){b.textContent=String(d),L.textContent=String(m),T.textContent=String(Math.round(u)),S.textContent=g(a)}function K(e){h.style.display="none",B.style.display="flex",O.textContent=String(e),C.textContent=`${e} REPS`}function R(){p=!1,v(),a=0,d=0,m=0,u=0,x.textContent="Ready",C.textContent="â€”",S.textContent="00:00",b.textContent="0",L.textContent="0",T.textContent="0",B.style.display="none",h.style.display="flex",E()}function W(){q.textContent=g(a),G.textContent=String(d),D.textContent=String(m),_.textContent=String(Math.round(u)),s.classList.add("show"),s.setAttribute("aria-hidden","false")}function E(){s.classList.remove("show"),s.setAttribute("aria-hidden","true")}function j(){x.textContent="Done",v(),W()}async function J(){const e=document.createElement("canvas"),o=1080;e.width=o,e.height=o;const t=e.getContext("2d"),r=t.createLinearGradient(0,0,o,o);r.addColorStop(0,"#07141a"),r.addColorStop(1,"#0b2a3a"),t.fillStyle=r,t.fillRect(0,0,o,o),t.globalAlpha=.2,t.beginPath(),t.arc(260,820,420,0,Math.PI*2),t.fillStyle="#4466ff",t.fill(),t.beginPath(),t.arc(860,240,420,0,Math.PI*2),t.fillStyle="#13f2d8",t.fill(),t.globalAlpha=1;const n=new Image;n.src="/1r-back.png",await new Promise(f=>{n.onload=f,n.onerror=f});const l=420,i=420;t.globalAlpha=.95,t.drawImage(n,(o-l)/2,90,l,i),t.globalAlpha=1,t.fillStyle="rgba(255,255,255,0.92)",t.font="900 56px system-ui, -apple-system, Segoe UI, Roboto, Arial",t.textAlign="center",t.fillText("SESSION COMPLETE",o/2,560);const A=[["TIME",g(a)],["SETS",String(d)],["REPS",String(m)],["CALORIES",String(Math.round(u))]];t.font="900 44px system-ui, -apple-system, Segoe UI, Roboto, Arial",t.fillStyle="rgba(255,255,255,0.80)";let I=640;for(const[f,P]of A)t.fillText(`${f}: ${P}`,o/2,I),I+=70;t.fillStyle="rgba(19,242,216,0.95)",t.font="900 46px system-ui, -apple-system, Segoe UI, Roboto, Arial",t.fillText("#1Rival",o/2,980);const y=document.createElement("a");y.href=e.toDataURL("image/png"),y.download="1Rival-Session.png",y.click()}N.addEventListener("click",()=>{p||(p=!0,x.textContent="Playing",z());const e=M();d+=1,m+=e,u+=e*w,K(e),H()});F.addEventListener("click",()=>{j()});U.addEventListener("click",E);s.addEventListener("click",e=>{e.target===s&&E()});$.addEventListener("click",()=>{R()});k.addEventListener("click",()=>{J()});R();
